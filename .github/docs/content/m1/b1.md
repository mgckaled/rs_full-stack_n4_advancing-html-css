# Layouts e Evolução em CSS

> [Voltar](../../../../m1/README.md) a página anterior

## Índice

- [Layouts e Evolução em CSS](#layouts-e-evolução-em-css)
  - [Índice](#índice)
  - [1. Introdução](#1-introdução)
    - [O que é Layout em CSS?](#o-que-é-layout-em-css)
    - [A Evolução dos Layouts em CSS](#a-evolução-dos-layouts-em-css)
  - [2. Positions](#2-positions)
    - [Valores Principais](#valores-principais)
      - [**Static (padrão)**](#static-padrão)
      - [**Relative**](#relative)
      - [**Absolute**](#absolute)
      - [**Fixed**](#fixed)
      - [**Sticky**](#sticky)
    - [Propriedades Relacionadas](#propriedades-relacionadas)
  - [3. Variáveis CSS (Custom Properties)](#3-variáveis-css-custom-properties)
    - [Sintaxe Básica](#sintaxe-básica)
    - [Escopo de Variáveis](#escopo-de-variáveis)
    - [Valores Padrão com Fallback](#valores-padrão-com-fallback)
    - [Vantagens das Variáveis CSS](#vantagens-das-variáveis-css)
    - [Exemplo Prático: Tema Responsivo](#exemplo-prático-tema-responsivo)
  - [4. Pseudo-classes e Pseudo-elementos](#4-pseudo-classes-e-pseudo-elementos)
    - [Pseudo-classes](#pseudo-classes)
      - [Pseudo-classes de Interação](#pseudo-classes-de-interação)
      - [Pseudo-classes de Estado](#pseudo-classes-de-estado)
      - [Pseudo-classes Estruturais](#pseudo-classes-estruturais)
      - [Pseudo-classes Funcionais](#pseudo-classes-funcionais)
    - [Pseudo-elementos](#pseudo-elementos)
      - [`::before` e `::after`](#before-e-after)
      - [`::first-line` e `::first-letter`](#first-line-e-first-letter)
      - [`::selection`](#selection)
      - [`::placeholder`](#placeholder)
      - [`::marker`](#marker)
      - [`::backdrop`](#backdrop)
    - [Exemplo Integrado: Card Interativo](#exemplo-integrado-card-interativo)
  - [Resumo de Referência Rápida](#resumo-de-referência-rápida)

## 1. Introdução

### O que é Layout em CSS?

Layout refere-se ao posicionamento e distribuição de elementos HTML na página. CSS evoluiu significativamente neste aspecto, passando de técnicas rudimentares para sistemas sofisticados que permitem criar designs responsivos e complexos.

### A Evolução dos Layouts em CSS

**Era 1: Tables (1990s)** — Antes de CSS, usavam-se tabelas HTML para layout (não recomendado).

**Era 2: Float (2000s)** — Introduziu a propriedade `float` para criar colunas de múltiplos layouts.

**Era 3: Posicionamento Absoluto** — Permitia controle preciso, mas era inflexível.

**Era 4: Flexbox (2015)** — Revolucionou layouts unidimensionais com distribuição inteligente de espaço.

**Era 5: CSS Grid (2017)** — Introduziu layouts bidimensionais natively no navegador.

**Era 6: Variáveis CSS e Pseudo-elementos** — Permitiram maior reutilização, manutenção e criatividade.

---

## 2. Positions

A propriedade `position` controla como um elemento é posicionado no fluxo do documento.

### Valores Principais

#### **Static (padrão)**

```css
position: static;
```

- Elemento segue o fluxo normal do documento
- Propriedades `top`, `right`, `bottom`, `left` são ignoradas
- Todos os elementos têm `position: static` por padrão

#### **Relative**

```css
position: relative;
top: 20px;
left: 10px;
```

- Elemento permanece no fluxo normal, mas é deslocado relativo à sua posição original
- O espaço original do elemento é preservado
- Pode servir como contexto de posicionamento para filhos com `position: absolute`

**Caso de Uso:** Pequenos ajustes de posição sem quebrar o layout.

#### **Absolute**

```css
position: absolute;
top: 50px;
right: 20px;
```

- Remove o elemento do fluxo normal
- Posiciona relativo ao ancestral `position: relative/absolute/fixed` mais próximo
- Se nenhum ancestral possui positioning, usa o `<body>`
- Ideal para elementos flutuantes (tooltips, modais)

**Caso de Uso:** Sobreposições, elementos flutuantes, components posicionados dinamicamente.

#### **Fixed**

```css
position: fixed;
top: 0;
left: 0;
width: 100%;
```

- Remove do fluxo normal
- Posiciona relativo à viewport (janela do navegador)
- Permanece no mesmo lugar mesmo ao fazer scroll
- Cria um novo `stacking context`

**Caso de Uso:** Headers fixos, sidebars flutuantes, botões "voltar ao topo".

#### **Sticky**

```css
position: sticky;
top: 0;
```

- Híbrido entre `relative` e `fixed`
- Comporta-se como `relative` até atingir um threshold (ex: `top: 0`)
- Depois se comporta como `fixed` dentro do seu container pai
- Permanece dentro do seu container pai (não "escapa")

**Caso de Uso:** Headers de seção que ficam visíveis durante scroll, headers de tabelas.

### Propriedades Relacionadas

```css
/* Direcionamento de posição */
top: 10px;
right: 20px;
bottom: 30px;
left: 40px;

/* Ordem de empilhamento */
z-index: 10;

/* Oferecimento de sobreposição em fixed/absolute */
inset: 0; /* Atalho para top, right, bottom, left = 0 */
```

---

## 3. Variáveis CSS (Custom Properties)

Variáveis CSS permitem armazenar valores reutilizáveis e manter consistência em todo o stylesheet.

### Sintaxe Básica

```css
/* Definição - sempre começa com dois hífens */
:root {
  --cor-primaria: #3498db;
  --cor-secundaria: #2ecc71;
  --espacamento-base: 16px;
  --border-radius: 8px;
  --transicao-rapida: 0.2s ease;
  --fonte-principal: 'Segoe UI', Tahoma, Geneva, Verdana;
}

/* Uso */
.botao {
  background-color: var(--cor-primaria);
  padding: var(--espacamento-base);
  border-radius: var(--border-radius);
  transition: background-color var(--transicao-rapida);
  font-family: var(--fonte-principal);
}
```

### Escopo de Variáveis

```css
/* Global - acessível em todo lugar */
:root {
  --tamanho-global: 16px;
}

/* Escopo de classe */
.tema-escuro {
  --cor-fundo: #1a1a1a;
  --cor-texto: #ffffff;
}

.tema-claro {
  --cor-fundo: #ffffff;
  --cor-texto: #000000;
}

/* Dentro de um componente */
.card {
  --card-padding: 20px;
  --card-shadow: 0 2px 8px rgba(0,0,0,0.1);
  
  padding: var(--card-padding);
  box-shadow: var(--card-shadow);
}
```

### Valores Padrão com Fallback

```css
/* Se --cor-primaria não existir, usa fallback */
color: var(--cor-primaria, #333);

/* Múltiplos níveis de fallback */
color: var(--cor-primaria, var(--cor-secundaria, blue));
```

### Vantagens das Variáveis CSS

1. **Manutenção Facilitada** — Mude a cor principal em um único lugar
2. **Temas Dinâmicos** — Alterne temas com JavaScript
3. **Responsividade** — Ajuste variáveis por breakpoint
4. **Reutilização** — Crie abstrações consistentes

### Exemplo Prático: Tema Responsivo

```css
:root {
  --espacamento-base: 16px;
  --tamanho-fonte: 16px;
}

@media (max-width: 768px) {
  :root {
    --espacamento-base: 12px;
    --tamanho-fonte: 14px;
  }
}

body {
  font-size: var(--tamanho-fonte);
  padding: var(--espacamento-base);
}
```

---

## 4. Pseudo-classes e Pseudo-elementos

### Pseudo-classes

Pseudo-classes representam um **estado especial** de um elemento. Começam com `:`.

#### Pseudo-classes de Interação

```css
/* Quando elemento está em foco (campos de input, links) */
a:focus {
  outline: 2px solid #3498db;
}

input:focus {
  border-color: #3498db;
  box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
}

/* Quando usuário passa o mouse */
button:hover {
  background-color: #2980b9;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

/* Quando elemento está sendo clicado */
button:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
```

#### Pseudo-classes de Estado

```css
/* Links visitados */
a:visited {
  color: #8e44ad;
}

/* Campos desabilitados */
input:disabled {
  background-color: #ecf0f1;
  cursor: not-allowed;
  opacity: 0.6;
}

/* Checkbox ou radio marcado */
input[type="checkbox"]:checked {
  accent-color: #27ae60;
}
```

#### Pseudo-classes Estruturais

```css
/* Primeiro filho de um elemento */
li:first-child {
  font-weight: bold;
}

/* Último filho */
li:last-child {
  border-bottom: none;
}

/* N-ésimo filho (fórmula 2n+1 = 1, 3, 5... ímpar) */
li:nth-child(2n+1) {
  background-color: #f5f5f5;
}

/* Apenas um filho */
p:only-child {
  margin: 0;
}

/* Elemento que é único do seu tipo entre siblings */
h2:only-of-type {
  margin-top: 0;
}
```

#### Pseudo-classes Funcionais

```css
/* Elementos que correspondem a um seletor */
li:where(.ativo) {
  background-color: #3498db;
  color: white;
}

/* Alvo de anchor (#id) */
section:target {
  background-color: #fffacd;
}

/* Entrada inválida */
input:invalid {
  border-color: #e74c3c;
}

/* Corresponde se pelo menos uma coisa for verdadeira */
:is(h1, h2, h3) {
  line-height: 1.2;
}
```

### Pseudo-elementos

Pseudo-elementos **criam elementos virtuais** que podem ser estilizados. Começam com `::`.

#### `::before` e `::after`

```css
/* Insere conteúdo antes do elemento */
.icone::before {
  content: "→ ";
  color: #3498db;
  font-weight: bold;
  margin-right: 8px;
}

/* Insere conteúdo depois do elemento */
.citacao::after {
  content: " — Autor";
  font-style: italic;
  opacity: 0.7;
}

/* Decorator com ::before */
.titulo::before {
  content: "";
  display: inline-block;
  width: 4px;
  height: 24px;
  background-color: #3498db;
  margin-right: 12px;
  border-radius: 2px;
}
```

#### `::first-line` e `::first-letter`

```css
/* Estiliza primeira linha de um parágrafo */
p::first-line {
  font-weight: bold;
  color: #2c3e50;
}

/* Estiliza primeira letra (drop cap) */
p::first-letter {
  font-size: 2em;
  font-weight: bold;
  float: left;
  line-height: 1;
  margin-right: 0.1em;
  color: #3498db;
}
```

#### `::selection`

```css
/* Estiliza texto selecionado pelo usuário */
::selection {
  background-color: #3498db;
  color: white;
}

p::selection {
  background-color: #2ecc71;
}
```

#### `::placeholder`

```css
/* Estiliza placeholder de input */
input::placeholder {
  color: #bdc3c7;
  font-style: italic;
}
```

#### `::marker`

```css
/* Estiliza bullets/numbers de listas */
li::marker {
  color: #3498db;
  font-weight: bold;
}
```

#### `::backdrop`

```css
/* Estiliza fundo de diálogos/fullscreen */
dialog::backdrop {
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
}
```

### Exemplo Integrado: Card Interativo

```css
.card {
  --card-padding: 20px;
  --cor-primaria: #3498db;
  
  padding: var(--card-padding);
  border-radius: 8px;
  background: white;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
  position: relative;
}

/* Decorator antes do card */
.card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: var(--cor-primaria);
  border-radius: 8px 0 0 8px;
}

/* Ao passar o mouse */
.card:hover {
  box-shadow: 0 8px 16px rgba(0,0,0,0.15);
  transform: translateY(-4px);
}

/* Título dentro do card */
.card h3::first-letter {
  color: var(--cor-primaria);
  font-size: 1.2em;
}

/* Botão dentro do card */
.card button {
  background: var(--cor-primaria);
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 4px;
  cursor: pointer;
  transition: 0.2s;
}

.card button:hover {
  background: #2980b9;
}

.card button:active {
  transform: scale(0.98);
}

.card button:focus {
  outline: 2px solid var(--cor-primaria);
  outline-offset: 2px;
}
```

---

## Resumo de Referência Rápida

| Conceito               | Uso Primário                | Quando Usar                   |
| ---------------------- | --------------------------- | ----------------------------- |
| **position: relative** | Pequenos deslocamentos      | Ajustes finos de posição      |
| **position: absolute** | Sobreposições               | Modais, tooltips              |
| **position: fixed**    | Elementos fixos na viewport | Navbars, botões flutuantes    |
| **position: sticky**   | Headers de seção            | Mantém visível durante scroll |
| **--variáveis-css**    | Reutilização de valores     | Temas, design systems         |
| **:hover, :focus**     | Estados de interação        | Feedback do usuário           |
| **::before, ::after**  | Conteúdo decorativo         | Ícones, separadores           |
| **::first-letter**     | Efeitos tipográficos        | Drop caps, destaque           |
| **::selection**        | Seleção de texto            | Branding visual               |
